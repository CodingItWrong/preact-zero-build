!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("preact")):"function"==typeof define&&define.amd?define(["exports","preact"],t):t(n.unistore={},n.preact)}(this,function(n,t){function e(n,t){for(var e in t)n[e]=t[e];return n}function r(n){this.getChildContext=function(){return{store:n.store}}}r.prototype.render=function(n){return n.children[0]},n.createStore=function(n){var t=[];function r(n){for(var e=[],r=0;r<t.length;r++)t[r]===n?n=null:e.push(t[r]);t=e}function o(r,o,u){n=o?r:e(e({},n),r);for(var i=t,f=0;f<i.length;f++)i[f](n,u)}return n=n||{},{action:function(t){function e(n){o(n,!1,t)}return function(){for(var r=arguments,o=[n],u=0;u<arguments.length;u++)o.push(r[u]);var i=t.apply(this,o);if(null!=i)return i.then?i.then(e):e(i)}},setState:o,subscribe:function(n){return t.push(n),function(){r(n)}},unsubscribe:r,getState:function(){return n}}},n.Provider=r,n.connect=function(n,r){var o;return"function"!=typeof n&&("string"==typeof(o=n||[])&&(o=o.split(/\s*,\s*/)),n=function(n){for(var t={},e=0;e<o.length;e++)t[o[e]]=n[o[e]];return t}),function(o){function u(u,i){var f=this,c=i.store,s=n(c?c.getState():{},u),a=r?function(n,t){"function"==typeof n&&(n=n(t));var e={};for(var r in n)e[r]=t.action(n[r]);return e}(r,c):{store:c},p=function(){var t=n(c?c.getState():{},f.props);for(var e in t)if(t[e]!==s[e])return s=t,f.setState(null);for(var r in s)if(!(r in t))return s=t,f.setState(null)};this.componentDidMount=function(){c.subscribe(p)},this.componentWillUnmount=function(){c.unsubscribe(p)},this.render=function(n){return t.h(o,e(e(e({},a),n),s))}}return(u.prototype=new t.Component).constructor=u}}});
